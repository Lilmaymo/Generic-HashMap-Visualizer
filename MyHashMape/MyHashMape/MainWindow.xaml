<Window x:Class="MyHashMape.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyHashMape"
        mc:Ignorable="d"
        Title="MainWindow" Height="650" Width="900">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="70"/>
            <RowDefinition Height="70"/>
            <RowDefinition Height="100"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="600"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
                <Label VerticalAlignment="Center" FontSize="15"  Content="length of array :"></Label>
            <TextBox  Height="30" Width="100" Name="HashmapSizeTextbox" ></TextBox>
                <Button Width="60"
        Height="60"
        Background="Transparent"
        BorderThickness="0"
        Click="Create_Hashmap"
     >

                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <Image Source="/Images/AddSign.png"
               Width="40"
               Height="40"
               Stretch="Uniform"/>

                        <TextBlock Text="Create Hashmap"
                   Margin="0,5,0,0"
                   FontSize="7"
                   HorizontalAlignment="Center"
                   Foreground="Black"/>
                    </StackPanel>
                </Button>

                <Label VerticalAlignment="Center" Content="AUTOFILL :"></Label>
                <ComboBox Width="100" Height="30" Name="AutofillCB" SelectionChanged="ComboBoxAutoFill_SelectionChanged">
                    <ComboBoxItem Content="5"></ComboBoxItem>
                    <ComboBoxItem Content="10"></ComboBoxItem>
                    <ComboBoxItem Content="25"></ComboBoxItem>
                    <ComboBoxItem Content="50"></ComboBoxItem>
                    <ComboBoxItem Content="100"></ComboBoxItem>
                </ComboBox>
                <CheckBox Margin="10,0,0,0" Name="ShowSteps" VerticalAlignment="Center" Content="ShowSteps" ></CheckBox>
            </StackPanel>
            
            <StackPanel Grid.Row="1" VerticalAlignment="Center" Orientation="Horizontal">
                <Label VerticalAlignment="Center">Operation :</Label>
                <ComboBox Width="100" Name="CbOperation" FontSize="15" SelectedIndex="0" Height="30">
                    <ComboBoxItem Content="insert"></ComboBoxItem>
                    <ComboBoxItem Content="Delete"></ComboBoxItem>
            </ComboBox>
                <Label Name="OperLabel1" VerticalAlignment="Center" Content="Add Key :"></Label>
                <TextBox Width="100" Name="OperTextbox1" Height="30"></TextBox>
                <Label Name="OperLabel2" VerticalAlignment="Center" Content="Add Value :"></Label>
                <TextBox Name="OperTextbox2" Margin="0,0,10,0" Width="100" Height="30"></TextBox>
                <Button Width="60"
                    Height="30"
                    Content="Apply"
                    Click="Add_Element">
                </Button>
            </StackPanel>
        <Border Grid.Row="0"
        Grid.RowSpan="2"
        Grid.Column="1"
        BorderBrush="Black"
        BorderThickness="2"
        CornerRadius="8"
        Padding="8"
        Background="White">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,0,0,8">

                 
                    <Button Content="Next ⟶"
                    Width="100"
                    Margin="5"
                    Click="NextStep_Click"/>
                </StackPanel>
                <Border Grid.Row="1"
                BorderBrush="Gray"
                BorderThickness="1"
                Padding="10"
                CornerRadius="5">

                    <TextBlock Text="{Binding StepDescription}"
                       TextWrapping="Wrap"
                       FontSize="14"/>
                </Border>

            </Grid>
        </Border>

        <Border Grid.Row="2"
        Grid.ColumnSpan="2"
                Width="200"
                
        BorderBrush="DarkBlue"
        BorderThickness="2"
        CornerRadius="8"
        Padding="10"
        Margin="10"
        Background="#F9FAFF"
        Visibility="{Binding IsBucketVisible,
                     Converter={StaticResource BoolToVisibilityConverter}}">

            <StackPanel>

                <TextBlock Text="Current Bucket"
                   FontWeight="Bold"
                   FontSize="12"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,0"/>

                <!-- Bucket Box -->
                        <TextBlock Grid.Row="0"
                           Text="{Binding SelectedBucket.Index}"
                           FontWeight="Bold"
                           HorizontalAlignment="Center"/>

                        <Rectangle Grid.Row="1" Height="1" Fill="Black"/>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="{Binding CurrentSearchKey}"
                               Foreground="Blue"
                               Margin="5"/>
                    <TextBlock Text="|" />
                    <TextBlock Text="{Binding CurrentSearchValue}"
                               Foreground="Green"
                               Margin="5"/>
                </StackPanel>


            </StackPanel>
        </Border>

        <ScrollViewer Margin="5" Grid.Row="3"
                      Grid.ColumnSpan="2"
              HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Auto">

            <ItemsControl VerticalAlignment="Top"  ItemsSource="{Binding Buckets}">

                <!-- One horizontal line -->
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <!-- Each bucket -->
                <ItemsControl.ItemTemplate >
                    <DataTemplate>
                        <StackPanel>

                            <!-- MAIN BUCKET -->
                            <Border   BorderBrush="{Binding MainBorderColor}" 
                                        BorderThickness="2"
                                        Padding="5"
                                        Margin="5"
                                        Width="110"
                                        Height="80">    

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="2"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0"
                                   Grid.ColumnSpan="2"
                                   Text="{Binding Index}"
                                   FontWeight="Bold"
                                   Foreground="{Binding IndexColor}" 
                                   HorizontalAlignment="Center"/>

                                    <Rectangle Grid.Row="1"
                               Grid.ColumnSpan="2"
                               Height="1"
                               Fill="Black"/>

                                    <TextBlock Grid.Row="2"
                           Grid.Column="1"
                           Text="{Binding Value}"
                           Foreground="Green"
                           HorizontalAlignment="Center"/>

                                    <TextBlock Grid.Row="2"
                           Grid.Column="0"
                           Text="{Binding Key}"
                           Foreground="Blue"
                           HorizontalAlignment="Center"/>
                                </Grid>
                            </Border>

                            <!-- CHAINED ENTRIES -->
                            <ItemsControl ItemsSource="{Binding Chain}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="{Binding BorderColor}" 
                                            BorderThickness="2"
                                            Margin="5,2,5,2"
                                            Padding="4"
                                            Width="110">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <TextBlock Text="{Binding Key}" Foreground="Blue" Margin="5,0"/>
                                                <TextBlock Text="|"/>
                                                <TextBlock Text="{Binding Value}" Foreground="Green" Margin="5,0"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>

            </ItemsControl>
        </ScrollViewer>



    </Grid>
</Window>
